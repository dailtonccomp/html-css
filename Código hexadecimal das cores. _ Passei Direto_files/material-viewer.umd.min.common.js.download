(("undefined"!==typeof self?self:this)["webpackJsonppdMaterialViewer"]=("undefined"!==typeof self?self:this)["webpackJsonppdMaterialViewer"]||[]).push([[0],{"0455":function(t,e,n){var o=n("834d");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("19342ea3",o,!0,{sourceMap:!1,shadowMode:!1})},"28f6":function(t,e,n){"use strict";n("9c2f")},"4fdb":function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mv-material-viewer-container"},[e("v-layout",{ref:"infobar",staticClass:"mv-material-viewer-infobar",class:{active:t.expand,"align-end":t.expand,"align-center":!t.expand,visible:t.visible,absolute:t.absolute},attrs:{row:"","justify-end":"",wrap:"","align-end":""}},[e("v-flex",{staticClass:"mv-infobar-main-content"},[t._t("main")],2),e("v-flex",{staticClass:"mv-infobar-metadata",attrs:{xs6:""}},[t._t("metadata")],2),e("v-flex",{key:t.material.Id,staticClass:"mv-infobar-actions",attrs:{xs6:""}},[e("pd-positive-evaluation",{attrs:{"content-object-id":t.material.Id,"evaluation-count":t.material.PositiveEvaluationCount,"track-data":t.localTrackData}}),e("pd-negative-evaluation",{attrs:{"content-object-id":t.material.Id,"evaluation-count":t.material.NegativeEvaluationCount,"track-data":t.localTrackData}}),t._t("third-icon"),e("span",{staticClass:"user"},[t.material.User?e("pd-author-badge",{attrs:{user:t.material.User,showPopover:!1,sizeAvatar:30}},[e("div",{staticClass:"pd-caption"},[t._v(t._s(t.$t("viewer.infobar.materialTimeLabel",{materialTimeElapsed:t.materialTimeElapsed})))])]):t._e()],1)],2),t.hideExpandArrow?t._e():e("div",{staticClass:"mv-infobar-expand-arrow",on:{click:t.toggleExpand}},[e("v-icon",{attrs:{size:"25"}},[t._v("keyboard_arrow_down")])],1)],1),t.absolute?e("pd-collapse",{attrs:{value:t.visible}},[e("div",{ref:"placeholder",staticClass:"mv-material-viewer-infobar-placeholder"})]):t._e()],1)},r=[],a=n("5b6c"),i=n("3e25"),c=n("1fe7"),s=n("2b88"),m=n("c32d"),l=n.n(m),u=n("5880"),d=n("1c56");function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var h={name:"MaterialViewerInfobar",data:function(){return{expand:!1,baseTrackData:{context:"detail"}}},props:{hideExpandArrow:{type:Boolean,required:!1,default:!1},trackData:{type:Object,default:function(){return{}}},visible:{type:Boolean,required:!1,default:!0},absolute:{type:Boolean,default:!0}},mounted:function(){this.absolute&&this.updatePlaceholderDimensions()},methods:{updatePlaceholderDimensions:function(){var t=this,e=this.$refs.infobar,n=this.$refs.placeholder,o=window.getComputedStyle(e).height,r=window.getComputedStyle(e).width;"auto"!==o&&"auto"!==r?(n.style.height=o,n.style.width=r):setTimeout((function(){return t.updatePlaceholderDimensions()}),10)},toggleExpand:function(){this.expand=!this.expand,this.$emit("toggleExpand",this.expand)}},computed:f({materialTimeElapsed:function(){return l.a.duration(new Date-new Date(this.material.CreationDate)).humanize()},hasMetadataSlot:function(){return!!this.$slots.metadata},localTrackData:function(){return Object.assign({},this.baseTrackData,this.trackData)}},Object(u["mapGetters"])({material:"viewer/material",commentCount:"viewer/materialViewer/comments/count"})),components:{PdCollapse:d["a"],PdPositiveEvaluation:c["a"],PdNegativeEvaluation:s["a"],PdButtonBase:a["a"],PdAuthorBadge:i["a"]}},y=h,b=(n("c7f7"),n("2877")),g=Object(b["a"])(y,o,r,!1,null,"c2a6356e",null);e["a"]=g.exports},"56bf":function(t,e,n){"use strict";n("0455")},"6db9":function(t,e,n){"use strict";n("912b")},"728e":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'.mv-material-viewer-infobar .mv-infobar-expand-arrow[data-v-c2a6356e]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mv-material-viewer-container[data-v-c2a6356e]{position:relative;z-index:5}.mv-material-viewer-container[data-v-c2a6356e]:after,.mv-material-viewer-container[data-v-c2a6356e]:before{content:" ";display:table}.mv-material-viewer-infobar-placeholder[data-v-c2a6356e]{height:70px}.mv-material-viewer-infobar[data-v-c2a6356e]{padding:10px 20px;background-color:#f6f5f8;box-shadow:1px 1px 3px rgba(0,0,0,.33);transition:all .3s;opacity:0;-ms-transform:translateY(-50px);transform:translateY(-50px)}.mv-material-viewer-infobar.absolute[data-v-c2a6356e]{position:absolute;left:0;right:0;top:0;pointer-events:none}.mv-material-viewer-infobar.visible[data-v-c2a6356e]{opacity:1;-ms-transform:translateY(0);transform:translateY(0);pointer-events:auto}.mv-material-viewer-infobar.active[data-v-c2a6356e]{padding-bottom:20px;z-index:11}.mv-material-viewer-infobar.active .mv-infobar-expand-arrow i[data-v-c2a6356e]{-ms-transform:translate(-50%,-50%) rotate(180deg);transform:translate(-50%,-50%) rotate(180deg)}.mv-material-viewer-infobar .mv-infobar-main-content[data-v-c2a6356e]{width:100%}.mv-material-viewer-infobar .mv-infobar-actions[data-v-c2a6356e]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;color:#494b56;font-size:14px;font-size:.875rem}.mv-material-viewer-infobar .mv-infobar-actions>*[data-v-c2a6356e]{margin-right:5px;margin-left:25px}.mv-material-viewer-infobar .mv-infobar-actions .pd-icon[data-v-c2a6356e]{font-size:20px;font-size:1.25rem}.mv-material-viewer-infobar .mv-infobar-actions .user[data-v-c2a6356e]{border-left:1px solid #d1d2d3;padding-left:25px;margin-left:25px}.mv-material-viewer-infobar .mv-infobar-expand-arrow[data-v-c2a6356e]{position:absolute;left:50%;bottom:-20px;-ms-transform:translate(-50%);transform:translate(-50%);width:34px;height:34px;cursor:pointer;z-index:1}.mv-material-viewer-infobar .mv-infobar-expand-arrow[data-v-c2a6356e]:before{content:"";position:absolute;left:50%;bottom:3px;-ms-transform:translate(-50%);transform:translate(-50%);height:19px;width:34px;display:block;border-radius:0 0 17px 17px;box-shadow:0 1px 1px rgba(0,0,0,.33);background-color:#f6f5f8;z-index:1}.mv-material-viewer-infobar .mv-infobar-expand-arrow i[data-v-c2a6356e]{position:absolute;top:50%;left:50%;-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);position:relative;color:#ff7300;z-index:2}',""])},"77f7":function(t,e,n){var o=n("91f8");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("12e44a81",o,!0,{sourceMap:!1,shadowMode:!1})},"834d":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".mv-comments-item-container .mv-comments-item .mv-comment-reply[data-v-2c8bcd59]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mv-comments-item-container[data-v-2c8bcd59]{padding:16px 0;margin-left:16px;margin-right:8px;border-bottom:1px solid #d1d2d3;position:relative}.mv-comments-item-container .mv-comments-item[data-v-2c8bcd59]{min-height:50px;height:100%;display:-ms-flexbox;display:flex}.mv-comments-item-container .mv-comments-item .mv-comments-item-avatar[data-v-2c8bcd59]{margin-top:0}.mv-comments-item-container .mv-comments-item .mv-comments-item-content[data-v-2c8bcd59]{padding-left:8px;margin-top:4px;width:100%;font-size:.813rem}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-name[data-v-2c8bcd59]{display:-ms-flexbox!important;display:flex!important;color:#fafafa;/*! autoprefixer: ignore next */overflow:hidden;text-overflow:ellipsis;/*! autoprefixer: ignore next */-webkit-box-orient:vertical;padding:0;word-break:break-word;line-clamp:1;-webkit-line-clamp:1;-moz-line-clamp:1;display:block;display:-webkit-box;display:-moz-box;visibility:visible;word-break:break-all;font-size:14px;font-size:.875rem;line-height:17px;max-height:18px;max-height:17px;padding-right:25px}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-name a[data-v-2c8bcd59]{color:#2e2f32;font-weight:600;margin-right:4px}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-name span[data-v-2c8bcd59]{color:#90939e;font-size:.813rem}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-name i[data-v-2c8bcd59]{font-size:.813rem;margin-right:4px;-ms-flex-item-align:center;align-self:center}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-comment[data-v-2c8bcd59]{padding:8px 0}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content .user-comment a[data-v-2c8bcd59]{font-size:.875rem;font-weight:600;margin-right:4px}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content span[data-v-2c8bcd59]{font-size:.875rem;word-wrap:break-word;word-break:break-word}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content span[data-v-2c8bcd59] p:last-child{margin-bottom:0}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .content span[data-v-2c8bcd59] p:first-child{display:inherit}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .footer[data-v-2c8bcd59]{margin:5px 0 0;color:#90939e;display:-ms-flexbox;display:flex;line-height:1.2}.mv-comments-item-container .mv-comments-item .mv-comments-item-content .footer .mv-comment-evaluation[data-v-2c8bcd59]{font-size:1.125rem;margin-top:2px}.mv-comments-item-container .mv-comments-item .mv-comment-reply[data-v-2c8bcd59]{margin-right:32px}.mv-comments-item-container .mv-comments-item .mv-comment-reply span[data-v-2c8bcd59]{margin-left:4px;font-size:.875rem}.mv-comments-item-container .mv-comments-item .mv-comment-action-menu[data-v-2c8bcd59]{right:0;top:16px}.mv-comments-item-container .mv-comments-item .selected[data-v-2c8bcd59]{-webkit-filter:grayscale(0);filter:grayscale(0)}.mv-comments-item-container .mv-comment-replies[data-v-2c8bcd59]{display:-ms-flexbox;display:flex;margin-top:16px}.mv-comments-item-container .mv-comment-replies .reply-separator[data-v-2c8bcd59]{width:32px;border-top:1px solid #d1d2d3;margin-top:12px;margin-right:8px}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list[data-v-2c8bcd59]{width:100%}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comment-replies-answers[data-v-2c8bcd59]{margin-bottom:8px;color:#90939e;font-size:.813rem;line-height:2;cursor:pointer;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comment-replies-answers span[data-v-2c8bcd59]:hover{text-decoration:underline}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comments-item-container[data-v-2c8bcd59]{border-bottom:1px solid rgba(0,0,0,0);margin:0 0 16px;padding:0}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comment-action-menu[data-v-2c8bcd59]{top:2px}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comment-load-recent span[data-v-2c8bcd59]{color:#90939e;font-size:.813rem;line-height:2;cursor:pointer}.mv-comments-item-container .mv-comment-replies .mv-comment-replies-list .mv-comment-load-recent span[data-v-2c8bcd59]:hover{text-decoration:underline}@keyframes blink-2c8bcd59{0%{background-color:rgba(209,210,211,0)}50%{background-color:#d1d2d3}to{background-color:rgba(209,210,211,0)}}.mark[data-v-2c8bcd59]{animation:blink-2c8bcd59 2s ease}.pd-action-menu.corner-right[data-v-2c8bcd59]{right:2px!important}",""])},"8d55":function(t,e,n){var o=n("728e");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("07ee0d52",o,!0,{sourceMap:!1,shadowMode:!1})},"912b":function(t,e,n){var o=n("eca1");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("19d8ad7a",o,!0,{sourceMap:!1,shadowMode:!1})},"91f8":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,'.mv-comments-content[data-v-5a43bafa]{width:100%;min-height:120px;background-color:#f6f5f8}.mv-comments-content .mv-comments-title[data-v-5a43bafa]{background-color:#fff;padding:12px;line-height:1.2}.mv-comments-content .mv-comments-title[data-v-5a43bafa]:after{box-shadow:none;transition:all .2s ease-in-out;content:"";display:-ms-flexbox;display:flex;height:4px;position:absolute;top:38px;left:-1px;width:100%;z-index:1}.mv-comments-content .mv-comments-title span[data-v-5a43bafa]{color:#90939e}.mv-comments-content .mv-comments-title.mv-comments-scrolling[data-v-5a43bafa]:after{box-shadow:0 2px 1px 0 rgba(0,0,0,.3);transition:all .2s ease-in-out}.mv-comments-content .mv-comment-list[data-v-5a43bafa]{max-height:265px}.mv-comments-content .mv-new-comment[data-v-5a43bafa]{padding:16px;line-height:20px;background-color:#fff}',""])},"9c2f":function(t,e,n){var o=n("b431");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);var r=n("499e").default;r("4f6a818c",o,!0,{sourceMap:!1,shadowMode:!1})},"9dff":function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("v-menu",{attrs:{"content-class":"mv-comments-menu",transition:"slide-y-transition","close-on-content-click":!1,"nudge-width":300,"offset-y":"",lazy:"","offset-overflow":"","close-on-click":t.mayCloseOnClick,"nudge-left":"150","z-index":"31"},model:{value:t.activated,callback:function(e){t.activated=e},expression:"activated"}},[t._t("default",(function(){return[e("div",{staticClass:"comment-icon-count test_comment_option"},[e("i",{staticClass:"pd-icon comment active",class:{"text-orange":t.activated}}),e("span",{staticClass:"comment-count"},[t._v(t._s(t.commentCount))])])]}),{slot:"activator"}),e("material-viewer-comments",{attrs:{mayCloseOnClick:t.mayCloseOnClick},on:{"update:mayCloseOnClick":function(e){t.mayCloseOnClick=e},"update:may-close-on-click":function(e){t.mayCloseOnClick=e}}})],2)},r=[],a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mv-comments-content"},[e("transition",{attrs:{name:"pd-fade-transition"}},[e("pd-loader",{directives:[{name:"show",rawName:"v-show",value:t.loading||!t.list,expression:"loading || !list"}],attrs:{color:"orange"}})],1),e("pd-collapse",{attrs:{value:!t.loading||t.list&&t.list.length>0,fade:""}},[e("div",{staticClass:"mv-comments-title test_comment_box_title",class:{"mv-comments-scrolling":t.scrolling}},[e("strong",[t._v(t._s(t.$t("viewer.comments.commentTitle")))]),e("span",[t._v(" • "+t._s(t.material.CommentCount))])]),e("div",{staticClass:"test_list_of_comments mv-comment-list pd-fancy-scroll",on:{scroll:t.onScroll}},t._l(t.list,(function(n){return e("material-viewer-comment-item",t._g({key:n.Id,ref:"comment".concat(n.Id),refInFor:!0,attrs:{comment:n,currentReplyingComment:t.commentReplyingTo,parentComment:t.parentComment},on:{deleteComment:t.onDeleteComment,startReply:t.onStartReply,loadMoreReplies:t.loadRepliesForComment,deleteReply:t.onDeleteReply}},t.$listeners))})),1),e("div",{staticClass:"mv-new-comment"},[e("material-comment-editor",{attrs:{saving:t.sending,buttonText:t.buttonText,commentReplyingTo:t.commentReplyingTo},on:{save:t.submitMessage,stopReply:t.onStopReply},model:{value:t.newComment,callback:function(e){t.newComment=e},expression:"newComment"}})],1)])],1)},i=[],c=n("5880"),s=n("60bb"),m=n.n(s),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mv-comments-item-container"},[e("div",{staticClass:"mv-comments-item"},[e("div",{staticClass:"test_userImage_on_comment mv-comments-item-avatar"},[e("pd-user-avatar",{attrs:{size:26,imageSrc:t.comment.Author.ImageUrl}})],1),e("div",{staticClass:"mv-comments-item-content"},[e("div",{staticClass:"content"},[e("div",{staticClass:"test_userName_on_comment user-name"},[e("router-link",{attrs:{to:t.userAuthorRouter}},[t._v(t._s(t.comment.Author.Name))]),t.comment.Author.isVerified?e("i",{staticClass:"pd-icon verified small"}):t._e(),e("span",{staticClass:"test_comment_time"},[t._v(" • "+t._s(t.daysSincePublished))])],1),e("div",{staticClass:"user-comment"},[t.comment.ReplyTo?e("router-link",{attrs:{to:t.userReplyRouter}},[t._v(t._s(t.comment.ReplyTo.Name))]):t._e(),e("span",{staticClass:"test_comment_text",domProps:{innerHTML:t._s(t.formattedCommentText)}})],1)]),e("div",{staticClass:"footer"},[e("div",{staticClass:"mv-comment-reply"},[e("i",{staticClass:"test_commentReply_option pd-icon inline reply active",class:{selected:t.isCurrentReplyingTo},on:{click:t.onStartReply}}),t.comment.ParentId?t._e():e("span",[t._v(t._s(t.comment.ReplyCount))])]),e("pd-positive-evaluation",{staticClass:"test_commentLike_option mv-comment-evaluation",attrs:{tooltipPosition:"top","content-object-id":t.comment.Id,"evaluation-count":t.comment.PositiveEvaluationCount}})],1)]),e("pd-action-menu",{directives:[{name:"show",rawName:"v-show",value:t.showActionMenuActivator,expression:"showActionMenuActivator"}],staticClass:"mv-comment-action-menu",attrs:{left:""},model:{value:t.isActionMenuOpen,callback:function(e){t.isActionMenuOpen=e},expression:"isActionMenuOpen"}},[e("ul",[t.isAuthor?e("li",{staticClass:"test_delete_comment_button",on:{click:t.onDeleteComment}},[e("v-icon",[t._v("delete")]),t._v("\n\t\t\t\t\t"+t._s(t.$t("common.actionMenu.remove"))+"\n\t\t\t\t")],1):e("li",{on:{click:t.reportComment}},[e("v-icon",[t._v("flag")]),t._v("\n\t\t\t\t\t"+t._s(t.$t("common.actionMenu.denounce"))+"\n\t\t\t\t")],1)])])],1),t.comment.Replies&&t.comment.Replies.length>0?e("div",{staticClass:"mv-comment-replies"},[e("div",{staticClass:"reply-separator"}),e("div",{staticClass:"test_list_of_replies mv-comment-replies-list"},[t.shouldLoadOlderReplies?e("div",{staticClass:"test_showAnswers_option mv-comment-replies-answers",on:{click:t.onLoadMoreReplies}},[e("span",[t._v(t._s(t.$t("viewer.comments.viewPreviousReplies").replace(":current",t.comment.Replies?t.comment.Replies.length:0).replace(":total",t.comment.ReplyCount)))])]):t._e(),t._l(t.comment.Replies,(function(n){return e("material-viewer-comment-item",t._g({key:n.Id,ref:"reply".concat(n.Id),refInFor:!0,attrs:{comment:n,currentReplyingComment:t.currentReplyingComment,parentComment:t.comment},on:{deleteComment:t.onDeleteReply}},t.$listeners))}))],2)]):t._e()])},u=[],d=n("c32d"),p=n.n(d),f=n("bdd0"),v=n("ebb3"),h=n("f6be"),y=n("1fe7"),b=n("766b"),g=n("27a0");function x(t){var e=document.createTextNode(t),n=document.createElement("p");return n.appendChild(e),n.innerHTML}var w={formatHtmlWithLineBreaks:function(t){var e=x(t);return e=e.split("\n\n").map((function(t){return"<p>"+t.split("\n").join("<br>")+"</p>"})).join(" "),e}},C=n("3f7c"),_=n("9957");function k(t){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k(t)}function R(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */R=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(P){c=function(t,e,n){return t[e]=n}}function s(t,e,n,o){var r=e&&e.prototype instanceof u?e:u,a=Object.create(r.prototype),i=new _(o||[]);return a._invoke=function(t,e,n){var o="suspendedStart";return function(r,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw a;return T()}for(n.method=r,n.arg=a;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var s=m(t,e,n);if("normal"===s.type){if(o=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o="completed",n.method="throw",n.arg=s.arg)}}}(t,n,i),a}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}t.wrap=s;var l={};function u(){}function d(){}function p(){}var f={};c(f,r,(function(){return this}));var v=Object.getPrototypeOf,h=v&&v(v(O([])));h&&h!==e&&n.call(h,r)&&(f=h);var y=p.prototype=u.prototype=Object.create(f);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(r,a,i,c){var s=m(t[r],t,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==k(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){o("next",t,i,c)}),(function(t){o("throw",t,i,c)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,c)}))}c(s.arg)}var r;this._invoke=function(t,n){function a(){return new e((function(e,r){o(t,n,e,r)}))}return r=r?r.then(a,a):a()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var o=m(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,l;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function O(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=p,c(y,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,o,r,a){void 0===a&&(a=Promise);var i=new g(s(e,n,o,r),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(y),c(y,i,"Generator"),c(y,r,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=O,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return i.type="throw",i.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function O(t,e,n,o,r,a,i){try{var c=t[a](i),s=c.value}catch(m){return void n(m)}c.done?e(s):Promise.resolve(s).then(o,r)}function T(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function i(t){O(a,o,r,i,c,"next",t)}function c(t){O(a,o,r,i,c,"throw",t)}i(void 0)}))}}var P={name:"MaterialViewerCommentItem",mixins:[h["a"]],props:{comment:{type:Object,required:!0},currentReplyingComment:{type:Object,default:null},parentComment:{type:Object,default:null},pageSize:{type:Number,default:10}},components:{PdPositiveEvaluation:y["a"],PdActionMenu:v["a"],PdUserAvatar:f["a"]},methods:{onDeleteComment:function(){var t=this;return T(R().mark((function e(){return R().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("deleteComment",t.comment,t.parentComment);case 1:case"end":return e.stop()}}),e)})))()},onDeleteReply:function(t,e){var n=this;return T(R().mark((function e(){return R().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.$emit("deleteReply",t,n.comment);case 1:case"end":return e.stop()}}),e)})))()},reportComment:function(){var t=this;return T(R().mark((function e(){return R().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("update:mayCloseOnClick",!1),g["a"].open(C["a"],{materialId:t.comment.Id,addMaterialReportOption:!1,onClose:function(){t.$emit("update:mayCloseOnClick",!0)}},{clickToClose:!1});case 2:case"end":return e.stop()}}),e)})))()},onStartReply:function(){this.$emit("startReply",this.comment,this.parentComment)},onLoadMoreReplies:function(){this.$emit("loadMoreReplies",this.comment)}},computed:{isAuthor:function(){return this.comment.Author.Id===_["student"].id},daysSincePublished:function(){return p()(this.comment.PublishDate).fromNow()},isCurrentReplyingTo:function(){return this.comment&&this.currentReplyingComment&&this.comment.Id==this.currentReplyingComment.Id},shouldLoadOlderReplies:function(){return this.comment.ReplyCount>1&&this.comment.Replies&&this.comment.Replies.length<this.comment.ReplyCount},formattedCommentText:function(){return this.comment?w.formatHtmlWithLineBreaks(this.comment.CommentText):""},userAuthorRouter:function(){return b["a"].userProfile.get(this.comment.Author)},userReplyRouter:function(){return b["a"].userProfile.get(this.comment.ReplyTo)}}},E=P,L=(n("56bf"),n("2877")),j=Object(L["a"])(E,l,u,!1,null,"2c8bcd59",null),I=j.exports,M=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mv-comment-editor"},[e("div",{class:{invalid:t.invalid},attrs:{id:"comment-text"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],ref:"textarea",staticClass:"test_commentText_input pd-fancy-scroll",class:{replying:t.isReplying},attrs:{placeholder:t.$t("viewer.comments.newComment")},domProps:{value:t.text},on:{keydown:t.onKeydown,input:function(e){e.target.composing||(t.text=e.target.value)}}}),e("transition",{attrs:{name:"pd-fade-transition",duration:100},on:{"before-enter":t.addReplyClass,"after-leave":t.removeReplyClass}},[t.commentReplyingTo?e("div",{staticClass:"mv-reply-box"},[e("span",[t._v(t._s(t.$t("viewer.comments.replyingTo"))+" "),e("strong",[t._v(t._s(t.commentReplyingTo?t.commentReplyingTo.Author.Name:""))])]),e("v-icon",{staticClass:"mv-reply-close",attrs:{size:16},on:{click:t.onStopReply}},[t._v("close")])],1):t._e()])],1),e("div",{staticClass:"validation"},[t.charLimitReached?e("div",{staticClass:"test_character_above_limit pd-caption text-left",class:{invalid:t.invalid},attrs:{id:"field-message"}},[t._v("\n\t\t\t\t"+t._s(t.$t("viewer.comments.charCountLimitReached"))+"\n\t\t\t")]):t._e(),e("div",{staticClass:"test_character_count pd-caption text-right",class:{invalid:t.invalid},attrs:{id:"character-count"}},[t._v("\n\t\t\t\t"+t._s(t.text?t.text.length:0)+"/"+t._s(t.MAX_LENGTH)+"\n\t\t\t")])]),e("pd-button-base",{staticClass:"test_comment_button",attrs:{color:"green",block:"",loading:t.saving},on:{click:t.save}},[t._v("\n\t\t\t"+t._s(t.buttonText)+"\n\t\t")])],1)},S=[],$=n("5b6c"),N=250,z=13,D={name:"MaterialCommentEditor",data:function(){return{MAX_LENGTH:N,text:"",showError:!1,isReplying:!1}},props:{value:{type:String,default:""},saving:{type:Boolean,default:!1},buttonText:{type:String,default:null},commentReplyingTo:{type:Object,default:null}},components:{PdButtonBase:$["a"]},watch:{text:function(t){t!==this.value&&this.$emit("input",t),this.showError=!1},value:function(t){t!==this.text&&(this.text=this.value)},commentReplyingTo:function(){this.focus()}},mounted:function(){this.text=this.value},computed:{invalid:function(){var t;return(null===(t=this.text)||void 0===t?void 0:t.length)>N||this.showError},charLimitReached:function(){var t;return(null===(t=this.text)||void 0===t?void 0:t.length)>N}},methods:{save:function(){var t;null!==(t=this.text)&&void 0!==t&&t.length&&!this.invalid?this.$emit("save"):this.showError=!0},focus:function(){this.$refs.textarea.focus()},onKeydown:function(t){if(t.which===z&&!t.shiftKey)return this.save(),t.preventDefault(),!1},addReplyClass:function(){this.isReplying=!0},removeReplyClass:function(){this.isReplying=!1},onStopReply:function(){this.$emit("stopReply")}}},A=D,G=(n("28f6"),Object(L["a"])(A,M,S,!1,null,"4078fbe1",null)),F=G.exports,B=n("6849"),V=n("1c56"),H=n("ca2f"),U=n("df4a"),Y=n("029e"),q=n("0aba");function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function J(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */J=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",i=o.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(O){c=function(t,e,n){return t[e]=n}}function s(t,e,n,o){var r=e&&e.prototype instanceof u?e:u,a=Object.create(r.prototype),i=new _(o||[]);return a._invoke=function(t,e,n){var o="suspendedStart";return function(r,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw a;return R()}for(n.method=r,n.arg=a;;){var i=n.delegate;if(i){var c=x(i,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var s=m(t,e,n);if("normal"===s.type){if(o=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o="completed",n.method="throw",n.arg=s.arg)}}}(t,n,i),a}function m(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(O){return{type:"throw",arg:O}}}t.wrap=s;var l={};function u(){}function d(){}function p(){}var f={};c(f,r,(function(){return this}));var v=Object.getPrototypeOf,h=v&&v(v(k([])));h&&h!==e&&n.call(h,r)&&(f=h);var y=p.prototype=u.prototype=Object.create(f);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function o(r,a,i,c){var s=m(t[r],t,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==K(u)&&n.call(u,"__await")?e.resolve(u.__await).then((function(t){o("next",t,i,c)}),(function(t){o("throw",t,i,c)})):e.resolve(u).then((function(t){l.value=t,i(l)}),(function(t){return o("throw",t,i,c)}))}c(s.arg)}var r;this._invoke=function(t,n){function a(){return new e((function(e,r){o(t,n,e,r)}))}return r=r?r.then(a,a):a()}}function x(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var o=m(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,l;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function k(t){if(t){var e=t[r];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:R}}function R(){return{value:void 0,done:!0}}return d.prototype=p,c(y,"constructor",p),c(p,"constructor",d),d.displayName=c(p,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,i,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,o,r,a){void 0===a&&(a=Promise);var i=new g(s(e,n,o,r),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(y),c(y,i,"Generator"),c(y,r,(function(){return this})),c(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=k,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return i.type="throw",i.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],i=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(c&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}function W(t,e,n,o,r,a,i){try{var c=t[a](i),s=c.value}catch(m){return void n(m)}c.done?e(s):Promise.resolve(s).then(o,r)}function X(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function i(t){W(a,o,r,i,c,"next",t)}function c(t){W(a,o,r,i,c,"throw",t)}i(void 0)}))}}function Q(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Q(Object(n),!0).forEach((function(e){tt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var et=.7,nt=.01,ot=10,rt=100;function at(t,e,n){return t>=e*n}var it={name:"MaterialViewerComments",data:function(){return{newComment:"",sending:!1,scrolling:!1,commentReplyingTo:null,parentComment:null,page:0,list:[],loading:!1,canFetchMore:!0,hasScrolled:!1,scrollToCommentId:null,scrollToReplyId:null,shouldMark:!0,loadedReplyPages:{}}},mounted:function(){this.fetchData(),H["a"].event("Comment View",{materialName:this.material.Name,materialID:this.material.Id,isPremiumContent:this.material.IsPremium,premiumUser:_["student"].IsPremium,count:this.material.CommentCount})},updated:function(){var t=this,e=!!this.scrollCommentIdParam,n=this.scrollToCommentId||this.scrollToReplyId||e,o=this.list&&this.list.length>0,r=n&&!this.hasScrolled&&o;if(r){var a=this.scrollToCommentId||this.scrollCommentIdParam,i="comment".concat(a),c="reply".concat(this.scrollToReplyId),s=function(t){var e=t.$refs[i];return e?e[0]:null},m=function(t){if(!t)return null;var e=t.$refs[c];return e?e[0]:null},l=s(this);this.scrollToReplyId&&(l=m(l)),l&&setTimeout((function(){l.$el.scrollIntoView({behavior:"smooth"}),t.shouldMark&&l.$el.classList.add("mark")}),500),this.hasScrolled=!0}},computed:Z(Z({buttonText:function(){return this.commentReplyingTo?this.$t("viewer.comments.createReply"):this.$t("viewer.comments.createComment")}},Object(c["mapGetters"])({material:"viewer/material"})),{},{scrollCommentIdParam:function(){return this.$route.params.scrollCommentId}}),methods:Z({fetchData:function(){var t=this;return X(J().mark((function e(){return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.canFetchMore){e.next=4;break}return e.next=3,t.fetchNextPage();case 3:t.canFetchMore=e.sent;case 4:case"end":return e.stop()}}),e)})))()},fetchNextPage:function(){var t=this;return X(J().mark((function e(){var n,o,r,a;return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.canFetchMore,e.prev=1,t.loading=!0,o=t.$route.params["parentCommentId"],r=t.$route.params["replyCommentId"],e.next=7,Y["a"].getContentComments(t.material.Id,t.page,ot);case 7:a=e.sent.Items,m.a.forEach(a,(function(e){return t.loadedReplyPages[e.Id]=0})),t.hasScrolled||!o&&!r||(t.shouldMark=!0,t.scrollToCommentId=o,t.scrollToReplyId=r),t.list=t.list.concat(a),t.page++,n=a.length===ot,e.next=17;break;case 15:e.prev=15,e.t0=e["catch"](1);case 17:return e.prev=17,t.loading=!1,e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,null,[[1,15,17,21]])})))()},onScroll:m.a.throttle((function(t){var e=t.target,n=e.scrollTop,o=(e.clientHeight,e.scrollHeight);at(n,o,et)&&!this.loading&&this.fetchData(),this.scrolling=at(n,o,nt)}),rt),onStartReply:function(t,e){e==this.parentComment&&t==this.commentReplyingTo?(this.commentReplyingTo=null,this.parentComment=null):(this.commentReplyingTo=t,this.parentComment=e)},submitMessage:function(){var t=this;return X(J().mark((function e(){return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.newComment=t.newComment.trim(),t.newComment.length){e.next=3;break}return e.abrupt("return");case 3:if(t.sending=!0,e.prev=4,!t.commentReplyingTo){e.next=10;break}return e.next=8,t.createNewReply();case 8:e.next=12;break;case 10:return e.next=12,t.createNewComment();case 12:U["a"].success(t.$t("viewer.comments.postSuccess")),e.next=29;break;case 15:if(e.prev=15,e.t0=e["catch"](4),!(e.t0&&e.t0.response&&e.t0.response.status)){e.next=28;break}e.t1=e.t0.response.status,e.next=e.t1===q["a"].Conflict.value?21:e.t1===q["a"].TooManyRequests.value?23:25;break;case 21:return U["a"].error(t.$t("viewer.comments.duplicatedComment")),e.abrupt("break",26);case 23:return U["a"].error(t.$t("common.tooManyRequestsMessage")),e.abrupt("break",26);case 25:U["a"].error(t.$t("common.apiError"));case 26:e.next=29;break;case 28:U["a"].error(t.$t("common.apiError"));case 29:return e.prev=29,t.sending=!1,e.finish(29);case 32:case"end":return e.stop()}}),e,null,[[4,15,29,32]])})))()},createNewReply:function(){var t=this;return X(J().mark((function e(){var n,o,r;return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.parentComment?t.parentComment:t.commentReplyingTo,e.next=3,Y["a"].createCommentReply(t.commentReplyingTo.Id,t.newComment);case 3:o=e.sent,r=n.Replies.concat([o]),t.$set(n,"Replies",r),t.$set(n,"ReplyCount",n.ReplyCount+1),t.commentReplyingTo=null,t.newComment=null,t.parentComment=null,t.scrollToContent(n.Id,o.Id),t.updateCommentCount(1),t.trackComment("reply");case 13:case"end":return e.stop()}}),e)})))()},createNewComment:function(){var t=this;return X(J().mark((function e(){var n;return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Y["a"].createComment(t.material.Id,t.newComment);case 2:n=e.sent,t.onCommentSubmited(n),t.trackComment("comment");case 5:case"end":return e.stop()}}),e)})))()},trackComment:function(t){H["a"].event("Comment Create",{eventType:t,materialName:this.material.Name,materialID:this.material.Id,isPremiumContent:this.material.IsPremium,premiumUser:_["student"].IsPremium})},loadRepliesForComment:function(t){var e=this;return X(J().mark((function n(){var o,r,a;return J().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.loadedReplyPages[t.Id],n.next=3,Y["a"].getCommentReplies(t.Id,o,ot);case 3:r=n.sent.Items,0==o&&e.$set(t,"Replies",[]),a=r.reverse().concat(t.Replies),e.$set(t,"Replies",a),e.loadedReplyPages[t.Id]++;case 8:case"end":return n.stop()}}),n)})))()},onDeleteComment:function(t,e){var n=this;return X(J().mark((function o(){return J().wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!e){o.next=2;break}return o.abrupt("return");case 2:return o.next=4,n.deleteComment(t,e,X(J().mark((function e(){return J().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.onCommentDeleted(t);case 1:case"end":return e.stop()}}),e)}))));case 4:case"end":return o.stop()}}),o)})))()},deleteComment:function(t,e,n){var o=this;return X(J().mark((function r(){var a;return J().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a=!1,e||!(t.ReplyCount>0)){r.next=7;break}return r.next=4,o.confirmModal("viewer.comments.removeReplies.title","viewer.comments.removeReplies.message","viewer.comments.delete");case 4:a=r.sent,r.next=10;break;case 7:return r.next=9,o.confirmModal("viewer.comments.removeModal.title","viewer.comments.removeModal.message","viewer.comments.delete");case 9:a=r.sent;case 10:if(a){r.next=12;break}return r.abrupt("return");case 12:return r.prev=12,r.next=15,Y["a"].deleteComment(t.Id);case 15:return r.next=17,n();case 17:U["a"].success(o.$t("viewer.comments.removeModal.success")),r.next=23;break;case 20:r.prev=20,r.t0=r["catch"](12),U["a"].error(o.$t("common.apiError"));case 23:case"end":return r.stop()}}),r,null,[[12,20]])})))()},confirmModal:function(t,e,n){var o=this;return X(J().mark((function r(){return J().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,g["a"].confirm(o.$t(t),o.$t(e),n?o.$t(n):void 0);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()},onDeleteReply:function(t,e,n){var o=this;return X(J().mark((function r(){return J().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,o.deleteComment(t,e,X(J().mark((function r(){var a;return J().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e.Replies.length<2)){r.next=5;break}return r.next=3,o.loadRepliesForComment(e,n);case 3:r.next=7;break;case 5:a=e.Replies.indexOf(t),e.Replies.splice(a,1);case 7:o.updateCommentCount(-1),e.ReplyCount--;case 9:case"end":return r.stop()}}),r)}))));case 2:case"end":return r.stop()}}),r)})))()},onCommentSubmited:function(t){this.newComment=null,this.updateCommentCount(1),this.list=[t].concat(this.list),this.loadedReplyPages[t.Id]=0,this.scrollToContent(t.Id)},onCommentDeleted:function(t){var e=t.Replies?t.Replies.length:0,n=this.list.indexOf(t);n>=0&&this.list.splice(n,1),this.updateCommentCount(-(e+1)),delete this.loadedReplyPages[t.Id]},scrollToContent:function(t,e){this.shouldScroll=!1,this.hasScrolled=!0,this.scrollToCommentId=t,this.scrollToReplyId=e,this.shouldMark=!1,this.shouldScroll=!0,this.hasScrolled=!1},onStopReply:function(){this.commentReplyingTo=null,this.parentComment=null}},Object(c["mapMutations"])({updateCommentCount:"viewer/UPDATE_MATERIAL_COMMENT_COUNT"})),components:{PdLoader:B["a"],MaterialViewerCommentItem:I,MaterialCommentEditor:F,PdCollapse:V["a"]}},ct=it,st=(n("ebb0"),Object(L["a"])(ct,a,i,!1,null,"5a43bafa",null)),mt=st.exports,lt={name:"CommentMenu",components:{MaterialViewerComments:mt},props:{commentCount:{type:Number},openOnInit:{type:Boolean,default:!1}},data:function(){return{activated:!1,mayCloseOnClick:!0}},mounted:function(){this.activated=this.openOnInit},methods:{onMayCloseOnClick:function(t){this.mayCloseOnClick=t}}},ut=lt,dt=(n("6db9"),Object(L["a"])(ut,o,r,!1,null,"18d7ac40",null));e["a"]=dt.exports},b431:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".mv-comment-editor textarea[data-v-4078fbe1]{border-radius:6px;background:#f6f5f8;width:100%;font-size:.875rem;padding:8px 16px;min-height:90px;max-height:120px;border:1px solid rgba(209,210,211,0)}.mv-comment-editor textarea.replying[data-v-4078fbe1]{min-height:66px;max-height:96px;border-radius:6px 6px 0 0}.mv-comment-editor textarea[data-v-4078fbe1]::-webkit-input-placeholder{color:#90939e}.mv-comment-editor textarea[data-v-4078fbe1]::-moz-placeholder{color:#90939e}.mv-comment-editor textarea[data-v-4078fbe1]:-ms-input-placeholder{color:#90939e}.mv-comment-editor textarea[data-v-4078fbe1]::placeholder{color:#90939e}.mv-comment-editor #comment-text[data-v-4078fbe1]{border-radius:6px;border:1px solid rgba(0,0,0,0)}.mv-comment-editor #comment-text.invalid[data-v-4078fbe1]{color:#ce2c10;border-color:#ce2c10}.mv-comment-editor #comment-text.invalid[data-v-4078fbe1]::-webkit-input-placeholder{color:#ce2c10}.mv-comment-editor #comment-text.invalid[data-v-4078fbe1]::-moz-placeholder{color:#ce2c10}.mv-comment-editor #comment-text.invalid[data-v-4078fbe1]:-ms-input-placeholder{color:#ce2c10}.mv-comment-editor #comment-text.invalid[data-v-4078fbe1]::placeholder{color:#ce2c10}.mv-comment-editor .mv-reply-box[data-v-4078fbe1]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;border-bottom-left-radius:6px;border-bottom-right-radius:6px;background:#f6f5f8;padding:2px 8px 2px 16px;height:28px;background-color:#d1d2d3;margin-top:-4px}.mv-comment-editor .mv-reply-box span[data-v-4078fbe1]{font-size:.875rem;color:#90939e}.mv-comment-editor .validation[data-v-4078fbe1]{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between;margin-bottom:16px}.mv-comment-editor .validation #character-count[data-v-4078fbe1],.mv-comment-editor .validation #field-message[data-v-4078fbe1]{width:100%}.mv-comment-editor .validation #character-count.invalid[data-v-4078fbe1],.mv-comment-editor .validation #field-message.invalid[data-v-4078fbe1]{color:#ce2c10}.mv-comment-editor .mv-reply-close[data-v-4078fbe1]{color:#494b56;margin-top:4px}",""])},c7f7:function(t,e,n){"use strict";n("8d55")},ebb0:function(t,e,n){"use strict";n("77f7")},eca1:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".comment-icon-count[data-v-18d7ac40]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.mv-comments-menu[data-v-18d7ac40]{width:300px;margin-top:16px;box-shadow:0 1px 3px 0 rgba(0,0,0,.4);border-radius:6px}.comment-icon-count[data-v-18d7ac40]{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;line-height:1}.comment-icon-count .pd-icon.comment[data-v-18d7ac40]{font-size:1.25rem}.comment-icon-count .comment-count[data-v-18d7ac40]{margin-left:4px;font-size:1rem}",""])}}]);